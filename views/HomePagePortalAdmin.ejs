<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="/img/favicon.ico" sizes="16x16">
    <link rel="stylesheet" href="/css/bootstrapV4.min.css">
    <link rel="stylesheet" href="/css/HomePagePortal.css">
    <title>Area Privata</title>
</head>

<body>
    <div class="d-flex toggled" id="wrapper">

        <!--Page content-->

        <div id="page-content-wrapper">

            <!--Nav Bar-->
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                <div class="col-sm-10 mt-4 text-center">
                    <a class="no_underline_blue" href="/home_page_portal">
                        <h1 class="display-4">Area Riservata</h1>
                    </a>
                </div>
                <div class="col-sm-2">
                    <img class="float-right" src="/img/logo_giustizia_alfa.png" alt="Logo Giustizia"
                        title="Logo della Giustizia">
                </div>
            </nav>

            <!--Middle content-->
            <div class="container-fluid mt-4">
                <div class="col-sm-8 mx-auto">
                    <div class="float-left">
                        <h4>Benvenuto/a, <%= user.nome %> <%= user.cognome %>.</h4>
                    </div>
                    <div class="float-right"><a class="btn btn-danger text-center" href="/logout">Esci</a></div>
                    <br>
                    <br>
                    <div class="float-left">
                        <a class="bordo" data-toggle="modal" data-target="#modal_edit_personal_data"
                            style="cursor: pointer;">Modifica password d'accesso
                            <img src="/img/modifica_ico.png" href="#" alt="icona di modifica"
                                style="width: 34px;height: 34px;">
                        </a>
                        <span style="display: none;"><%= user.nome %></span>
                        <span style="display: none;"><%= user.cognome %></span>
                        <span style="display: none;"><%= user.username %></span>
                    </div>
                    <br>
                    <br>
                    <div class="mt-5">
                        <p>Elenco dei funzionari del Tribunale di Brescia.</p>
                    </div>
                    <table class="table bordo ">
                        <thead>
                            <tr>
                                <th scope="col">Username</th>
                                <th scope="col">Nome</th>
                                <th scope="col">Cognome</th>
                                <th scope="col">Categoria</th>
                                <th class="text-center" scope="col">Comandi</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% users.forEach(function(person){ %>
                            <tr>
                                <td style="display: none;"><%= person.oid %></td>
                                <td><%= person.username %></td>
                                <td><%= person.nome %></td>
                                <td><%= person.cognome %></td>
                                <td><%= person.groupname %></td>
                                <td class="text-center">
                                    <a class="delete_request" href="#">
                                        <img src="/img/delete_ico.png" style="width: 30px;height: 30px">
                                    </a>
                                </td>
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                    <div class="text-center">
                        <a class="btn btn-success" data-toggle="modal" data-target="#modal_add_new_user">Aggiungi nuovo utente</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal_edit_personal_data" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modifica dati d'accesso</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="form-update-data-user">
                        <div class="form-group">
                            <label for="data_username" class="col-form-label">Utente*:</label>
                            <input type="text" class="form-control" id="data_username" disabled="disabled">
                        </div>
                        <div class="form-group">
                            <label for="data_user_name" class="col-form-label">Nome*:</label>
                            <input type="text" class="form-control" id="data_user_name" disabled="disabled">
                        </div>
                        <div class="form-group">
                            <label for="data_user_surname" class="col-form-label">Cognome*:</label>
                            <input type="email" class="form-control" id="data_user_surname" disabled="disabled">
                        </div>
                        <div class="form-group">
                            <label for="data_user_password" class="col-form-label">Nuova password:</label>
                            <input type="password" class="form-control" id="data_user_password" name="data_user_password"
                                placeholder="**********">
                        </div>
                        <p> * : campi non modificabili.</p>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Chiudi</button>
                    <button type="button" id="send_update_data_user" class="btn btn-primary">Aggiorna</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="modal_add_new_user" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Nuovo utente</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="form_new_user">
                        <div class="form-group">
                            <label for="add_user_username" class="col-form-label">Utente:</label>
                            <input type="text" class="form-control" id="add_user_username" required>
                        </div>
                        <div class="form-group">
                            <label for="add_user_name" class="col-form-label">Nome:</label>
                            <input type="text" class="form-control" id="add_user_name" required>
                        </div>
                        <div class="form-group">
                            <label for="add_user_surname" class="col-form-label">Cognome:</label>
                            <input type="email" class="form-control" id="add_user_surname" required>
                        </div>
                        <div class="form-group">
                            <label for="add_user_password" class="col-form-label">Nuova password:</label>
                            <input type="password" class="form-control" id="add_user_password" name="add_user_password" required>
                        </div>
                        <div id="select_type_user" class="form-group">
                            <select class="custom-select mt-2">
                                <option selected>-</option>
                                <option value="1">Personale Cancelleria</option>
                                <option value="2">Amministratore</option>
                            </select>
                        </div>
                        <p> * : campi non modificabili.</p>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Chiudi</button>
                    <button type="button" id="send_add_new_user" class="btn btn-primary">Inserisci</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrapV4.min.js"></script>
    <script src="/js/Home_Page_Portal_Admin.js"></script>
</body>